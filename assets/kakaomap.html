<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오 맵</title>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=31e0f394a6fff7b5d25aaf635b5838cb"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #map { width: 100%; height: 100%; }
    </style>
</head>
<body>
<div id="map"></div>

<script>
    var container = document.getElementById('map');
    var options = {
        center: new kakao.maps.LatLng(37.5665, 126.9780), // 초기 중심 위치 (서울)
        level: 3
    };

    var map = new kakao.maps.Map(container, options);
    var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

    function displayMarker(locPosition, message) {
        var imageSize = new kakao.maps.Size(24, 35);
        var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

        var marker = new kakao.maps.Marker({
            map: map,
            position: locPosition,
            image: markerImage
        });

        var iwContent = message,
            iwRemoveable = true;

        var infowindow = new kakao.maps.InfoWindow({
            content: iwContent,
            removable: iwRemoveable
        });

        infowindow.open(map, marker);
        map.setCenter(locPosition);
    }

    // Flutter에서 호출할 함수 (현재 위치 업데이트)
    function updateLocation(lat, lon) {
        var locPosition = new kakao.maps.LatLng(lat, lon);
        var message = '<div style="padding:5px;">현재 위치</div>';
        displayMarker(locPosition, message);
    }
</script>
</body>
</html>
