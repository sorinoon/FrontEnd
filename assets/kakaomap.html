<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오 맵</title>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=31e0f394a6fff7b5d25aaf635b5838cb"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #map { width: 100%; height: 100vh; }
    </style>
</head>
<body>
<div id="map"></div>

<script>
    kakao.maps.load(() => {
      var mapContainer = document.getElementById('map');
      var mapOption = {
        center: new kakao.maps.LatLng(37.5665, 126.9780), // 기본 위치 (서울)
        level: 3
      };
      var map = new kakao.maps.Map(mapContainer, mapOption);

      var marker = new kakao.maps.Marker({ position: map.getCenter() });
      marker.setMap(map);

      window.addEventListener("message", function(event) {
        var data = event.data;
        if (data.type === "moveToLocation") {
          var newPos = new kakao.maps.LatLng(data.lat, data.lng);
          map.setCenter(newPos);

          marker.setMap(null);
          marker = new kakao.maps.Marker({ position: newPos });
          marker.setMap(map);
        }
      });
    });
</script>

</body>
</html>
